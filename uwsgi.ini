# uWSGI配置文件
# 微信问卷系统生产环境配置

[uwsgi]
# 项目目录（Linux路径格式）
chdir = /path/to/your/project/anwser

# WSGI模块
module = wechat_survey.wsgi:application

# 进程配置
master = true
processes = 4
threads = 2

# 监听端口
# http = 0.0.0.0:8000  # 直接监听HTTP端口（开发测试用）
socket = 127.0.0.1:8001  # 监听Unix套接字（生产环境配合Nginx使用）

# 静态文件配置（Nginx处理静态文件时可注释）
# static-map = /static=/path/to/your/project/anwser/staticfiles

# 日志配置
logto = /path/to/your/project/anwser/uwsgi.log
log-reopen = true
log-maxsize = 10000000  # 日志文件最大10MB

# 环境变量
env = DJANGO_SETTINGS_MODULE=wechat_survey.settings
env = ENV_FILE=.env.production

# 其他配置
touch-reload = /path/to/your/project/anwser/reload.txt
pidfile = /path/to/your/project/anwser/uwsgi.pid
vacuum = true
die-on-term = true

# 超时设置
timeout = 300

# 缓冲设置
buffer-size = 32768

# 优化设置
enable-threads = true
thunder-lock = true
lazy-apps = true

# Python配置
python-autoreload = 0
py-autoreload = 0
